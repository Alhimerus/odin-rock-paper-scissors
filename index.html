<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Rock Paper Scissors</title>
</head>

<body>
  <script>
    function computerPlay() {
      let computerSelection;
      let randomNumber = Math.random();
      if (randomNumber <= 1 / 3) {
        computerSelection = "Scissors";
      } else if (randomNumber <= 2 / 3) {
        computerSelection = "Rock";
      } else {
        computerSelection = "Paper";
      }
      return computerSelection;
    }

    function standardizeSelection(selection) {
      selectionFirstLetter = (selection.slice(0, 1)).toUpperCase();
      selectionRest = (selection.slice(1)).toLowerCase();
      return selectionFirstLetter + selectionRest;
    }

    function roundRedo() {
      playerSelection = standardizeSelection(prompt("What will you play?"));
      computerSelection = computerPlay();
      return playRound(playerSelection, computerSelection);
    }


    function playRound(playerSelection, computerSelection) {
      if (playerSelection === computerSelection) {
        alert("It's a tie! Have a rematch.")
        return roundRedo();
      } else if (playerSelection !== "Paper" && playerSelection !== "Scissors" && playerSelection !== "Rock") {
        alert("Wrong input! You have to choose rock, paper or scissors!")
        return roundRedo();
      } else if ((playerSelection === "Paper" && computerSelection === "Rock") || (playerSelection === "Rock" && computerSelection === "Scissors") || (playerSelection === "Scissors" && computerSelection === "Paper")) {
        console.log(`You win this round! ${playerSelection} beats ${computerSelection}`)
        return true;
      } else {
        console.log(`You lose this round! ${computerSelection} beats ${playerSelection}`)
        return false;
      }
    }

    function game() {
      console.log("Let's start the game!")
      let playerWinCount = 0;
      let computerWinCount = 0;
      for (let i = 1; i <= 5; i++) {
        let playerSelection = standardizeSelection(prompt("What will you play?"));
        let computerSelection = computerPlay();
        if (playRound(playerSelection, computerSelection) === true) {
          playerWinCount++;
        }
        else {
          computerWinCount++;
        }
      }
      if (playerWinCount > computerWinCount) {
        console.log(`You won the game with ${playerWinCount} wins and ${5 - playerWinCount} loses!`)
      } else {
        console.log(`The computer won the game with ${computerWinCount} wins and ${5 - computerWinCount} loses!`)
      }
    }

    game();

  </script>
</body>

</html>